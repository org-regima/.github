{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Archetypal Pattern Schema",
  "description": "Schema for UIA Archetypal Patterns with domain-specific placeholders",
  "type": "object",
  "definitions": {
    "ArchetypalPattern": {
      "type": "object",
      "properties": {
        "pattern_id": {
          "type": "string",
          "pattern": "^\\d+$",
          "description": "UIA pattern identifier (e.g., '12610010')"
        },
        "name": {
          "type": "string",
          "description": "Pattern name"
        },
        "archetypal_pattern": {
          "type": "string",
          "description": "Pattern text with {{placeholder}} format for domain-specific terms"
        },
        "original_template": {
          "type": "string",
          "description": "Original template text without placeholders"
        },
        "placeholders": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of placeholder names used in this pattern"
        },
        "domain_mappings": {
          "type": "object",
          "description": "Mapping of placeholders to domain-specific terms",
          "patternProperties": {
            "^[a-z-]+$": {
              "type": "object",
              "patternProperties": {
                "^[a-z]+$": {
                  "type": "string"
                }
              }
            }
          }
        },
        "source_file": {
          "type": "string",
          "description": "Source markdown file name"
        },
        "domain_specific_content": {
          "type": "object",
          "description": "Full domain-specific implementations of the pattern from UIA",
          "properties": {
            "physical": {
              "type": "string",
              "description": "Physical domain implementation (spatial, material, architectural)"
            },
            "social": {
              "type": "string",
              "description": "Social domain implementation (organizational, community, institutional)"
            },
            "conceptual": {
              "type": "string",
              "description": "Conceptual domain implementation (knowledge, theoretical, paradigmatic)"
            },
            "psychic": {
              "type": "string",
              "description": "Psychic domain implementation (awareness, consciousness, mental)"
            }
          }
        },
        "broader_patterns": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Pattern IDs of broader (more general) patterns"
        },
        "narrower_patterns": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Pattern IDs of narrower (more specific) patterns"
        }
      },
      "required": [
        "pattern_id",
        "name",
        "archetypal_pattern",
        "placeholders"
      ]
    },
    "DomainMapping": {
      "type": "object",
      "properties": {
        "placeholder": {
          "type": "string",
          "description": "Placeholder name (without {{ }})"
        },
        "domains": {
          "type": "object",
          "properties": {
            "physical": {
              "type": "string"
            },
            "social": {
              "type": "string"
            },
            "conceptual": {
              "type": "string"
            },
            "psychic": {
              "type": "string"
            }
          },
          "description": "Domain-specific mappings for this placeholder"
        },
        "description": {
          "type": "string",
          "description": "Description of what this placeholder represents"
        }
      },
      "required": [
        "placeholder",
        "domains"
      ]
    },
    "ArchetypalPatternCollection": {
      "type": "object",
      "properties": {
        "meta": {
          "type": "object",
          "properties": {
            "title": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "total_patterns": {
              "type": "integer"
            },
            "source_directory": {
              "type": "string"
            },
            "format": {
              "type": "string"
            },
            "includes_domain_content": {
              "type": "boolean",
              "description": "Whether patterns include full domain-specific content"
            },
            "patterns_with_domain_content": {
              "type": "integer",
              "description": "Number of patterns that have domain-specific content"
            }
          }
        },
        "patterns": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ArchetypalPattern"
          }
        },
        "placeholder_definitions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DomainMapping"
          }
        }
      },
      "required": [
        "meta",
        "patterns"
      ]
    }
  },
  "oneOf": [
    {
      "$ref": "#/definitions/ArchetypalPattern"
    },
    {
      "$ref": "#/definitions/DomainMapping"
    },
    {
      "$ref": "#/definitions/ArchetypalPatternCollection"
    }
  ]
}